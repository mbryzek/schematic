<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Circuit Schematic Builder</title>
    <link rel="stylesheet" href="css/theme.css">
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/components.css">
    <link rel="stylesheet" href="css/canvas.css">
</head>
<body>
    <div id="app">
        <!-- Header with controls -->
        <header class="toolbar">
            <div class="toolbar-left">
                <h1>Circuit Schematic Builder</h1>
            </div>
            <div class="toolbar-center">
                <button id="zoom-out" class="toolbar-btn" title="Zoom Out (-)">
                    <svg width="20" height="20" viewBox="0 0 20 20">
                        <circle cx="10" cy="10" r="8" fill="none" stroke="currentColor" stroke-width="2"/>
                        <line x1="6" y1="10" x2="14" y2="10" stroke="currentColor" stroke-width="2"/>
                    </svg>
                </button>
                <span id="zoom-level">100%</span>
                <button id="zoom-in" class="toolbar-btn" title="Zoom In (+)">
                    <svg width="20" height="20" viewBox="0 0 20 20">
                        <circle cx="10" cy="10" r="8" fill="none" stroke="currentColor" stroke-width="2"/>
                        <line x1="6" y1="10" x2="14" y2="10" stroke="currentColor" stroke-width="2"/>
                        <line x1="10" y1="6" x2="10" y2="14" stroke="currentColor" stroke-width="2"/>
                    </svg>
                </button>
                <button id="fit-to-screen" class="toolbar-btn" title="Fit to Screen">
                    <svg width="20" height="20" viewBox="0 0 20 20">
                        <rect x="3" y="3" width="14" height="14" fill="none" stroke="currentColor" stroke-width="2"/>
                        <polyline points="8,5 5,5 5,8" fill="none" stroke="currentColor" stroke-width="2"/>
                        <polyline points="12,15 15,15 15,12" fill="none" stroke="currentColor" stroke-width="2"/>
                    </svg>
                </button>
            </div>
            <div class="toolbar-right">
                <button id="toggle-grid" class="toolbar-btn" title="Toggle Grid">
                    <svg width="20" height="20" viewBox="0 0 20 20">
                        <line x1="0" y1="5" x2="20" y2="5" stroke="currentColor" stroke-width="1"/>
                        <line x1="0" y1="10" x2="20" y2="10" stroke="currentColor" stroke-width="1"/>
                        <line x1="0" y1="15" x2="20" y2="15" stroke="currentColor" stroke-width="1"/>
                        <line x1="5" y1="0" x2="5" y2="20" stroke="currentColor" stroke-width="1"/>
                        <line x1="10" y1="0" x2="10" y2="20" stroke="currentColor" stroke-width="1"/>
                        <line x1="15" y1="0" x2="15" y2="20" stroke="currentColor" stroke-width="1"/>
                    </svg>
                </button>
                <button id="theme-toggle" class="toolbar-btn" title="Toggle Theme">
                    <svg width="20" height="20" viewBox="0 0 20 20">
                        <circle cx="10" cy="10" r="5" fill="currentColor"/>
                        <g class="theme-icon-rays">
                            <line x1="10" y1="1" x2="10" y2="3" stroke="currentColor" stroke-width="2"/>
                            <line x1="10" y1="17" x2="10" y2="19" stroke="currentColor" stroke-width="2"/>
                            <line x1="1" y1="10" x2="3" y2="10" stroke="currentColor" stroke-width="2"/>
                            <line x1="17" y1="10" x2="19" y2="10" stroke="currentColor" stroke-width="2"/>
                        </g>
                    </svg>
                </button>
                <button id="export-png" class="toolbar-btn primary" title="Export as PNG">
                    <svg width="20" height="20" viewBox="0 0 20 20">
                        <path d="M10 13 L6 9 L8 9 L8 3 L12 3 L12 9 L14 9 Z" fill="currentColor"/>
                        <rect x="4" y="14" width="12" height="3" fill="currentColor"/>
                    </svg>
                    Export PNG
                </button>
            </div>
        </header>

        <!-- Main content area -->
        <div class="main-content">
            <!-- Canvas area -->
            <div id="canvas-container" class="canvas-container">
                <svg id="canvas" class="schematic-canvas">
                    <defs>
                        <!-- Grid pattern -->
                        <pattern id="grid-pattern" width="10" height="10" patternUnits="userSpaceOnUse">
                            <circle cx="0" cy="0" r="0.5" class="grid-dot"/>
                        </pattern>
                    </defs>

                    <!-- Grid background -->
                    <rect id="grid-background" width="100%" height="100%" fill="url(#grid-pattern)" class="grid-layer"/>

                    <!-- Main content group with transform -->
                    <g id="canvas-content" transform="translate(0,0) scale(1)">
                        <!-- Wires layer -->
                        <g id="wires-layer"></g>

                        <!-- Components layer -->
                        <g id="components-layer"></g>

                        <!-- Selection layer -->
                        <g id="selection-layer"></g>

                        <!-- Wire drawing preview -->
                        <g id="wire-preview-layer"></g>
                    </g>
                </svg>
            </div>

            <!-- Component panel -->
            <aside class="component-panel">
                <div class="panel-header">
                    <h2>Components</h2>
                    <button id="upload-component" class="btn-small" title="Upload Custom Component">
                        <svg width="16" height="16" viewBox="0 0 16 16">
                            <path d="M8 2 L8 10 M8 2 L5 5 M8 2 L11 5" stroke="currentColor" stroke-width="2" fill="none"/>
                            <rect x="2" y="12" width="12" height="2" fill="currentColor"/>
                        </svg>
                        Upload
                    </button>
                </div>

                <div class="search-box">
                    <input type="text" id="component-search" placeholder="Search components..." />
                </div>

                <div class="category-filter">
                    <button class="category-btn active" data-category="all">All</button>
                    <button class="category-btn" data-category="passive">Passive</button>
                    <button class="category-btn" data-category="active">Active</button>
                    <button class="category-btn" data-category="power">Power</button>
                    <button class="category-btn" data-category="user">User</button>
                </div>

                <div id="components-list" class="components-list">
                    <!-- Components will be loaded here dynamically -->
                </div>
            </aside>
        </div>

        <!-- Status bar -->
        <footer class="status-bar">
            <span id="status-message">Ready</span>
            <span id="cursor-position">X: 0, Y: 0</span>
        </footer>
    </div>

    <!-- Hidden file input for component upload -->
    <input type="file" id="component-file-input" accept=".json,.svg" style="display: none;">

    <!-- Scripts -->
    <script src="js/storage.js"></script>
    <script src="js/theme.js"></script>
    <script src="js/canvas.js"></script>
    <script src="js/electrical-rules.js"></script>
    <script src="js/component-manager.js"></script>
    <script src="js/schematic-manager.js"></script>
    <script src="js/drag-drop.js"></script>
    <script src="js/wire-router.js"></script>
    <script src="js/export.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
